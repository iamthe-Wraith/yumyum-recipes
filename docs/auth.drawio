<mxfile host="65bd71144e">
    <diagram id="_MBaST8blk9vRXmILy7C" name="Page-1">
        <mxGraphModel dx="1527" dy="1435" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="20" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="5" target="9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="33" style="edgeStyle=none;html=1;entryX=1;entryY=0.047;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="5" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="User Signs Up/In" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="19" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="9" target="14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="9" target="22" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="630" y="110" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="9" value="Create Auth Token" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" parent="1" vertex="1">
                    <mxGeometry x="440" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="420" y="200" width="160" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="Create and sign JWT with 15 min expiration" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="430" y="210" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="Save JWT into Redis???" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6a00ff;fontColor=#ffffff;strokeColor=#3700CC;" parent="1" vertex="1">
                    <mxGeometry x="430" y="280" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="Set JWT as response Authorization header" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="430" y="350" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="21" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="22" target="23" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="135" style="edgeStyle=none;html=1;entryX=1.015;entryY=0.625;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#fff;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="22" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="880" y="110"/>
                            <mxPoint x="880" y="480"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="22" value="Create Auth Token" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" parent="1" vertex="1">
                    <mxGeometry x="640" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="620" y="200" width="160" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="Create and sign JWT with 30 day expiration" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="630" y="210" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="Set JWT as refreshToken HTTP Cookie" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="630" y="350" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="Save refresh token to DB with ref to user" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="630" y="280" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="Client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="80" width="90" height="640" as="geometry"/>
                </mxCell>
                <mxCell id="39" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="34" target="38" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="40" style="edgeStyle=none;html=1;entryX=1;entryY=0.953;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" parent="1" source="34" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="User makes a request" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="660" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="42" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="38" target="41" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="Check for Authorization header" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="400" y="660" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="49" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="41" target="43" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="620" y="800"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="50" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="49" vertex="1" connectable="0">
                    <mxGeometry x="-0.4419" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="53" style="edgeStyle=none;html=1;entryX=0.998;entryY=0.812;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="41" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="730" y="690"/>
                            <mxPoint x="730" y="600"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="54" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="53" vertex="1" connectable="0">
                    <mxGeometry x="-0.8897" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="67" value="401" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="53" vertex="1" connectable="0">
                    <mxGeometry x="0.258" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="41" value="Found?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="580" y="650" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="51" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="43" target="45" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="740" y="910"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="52" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="51" vertex="1" connectable="0">
                    <mxGeometry x="-0.334" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="56" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="43" target="55" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="820" y="800"/>
                            <mxPoint x="820" y="730"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="57" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="56" vertex="1" connectable="0">
                    <mxGeometry x="-0.4053" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="43" value="Is Valid?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="700" y="760" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="58" style="edgeStyle=none;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="122" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="860" y="730" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="61" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="45" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1040" y="910"/>
                            <mxPoint x="1040" y="1020"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="94" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="61" vertex="1" connectable="0">
                    <mxGeometry x="-0.1667" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="127" style="edgeStyle=none;html=1;strokeColor=#fff;fontColor=#6600CC;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="45" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="830" y="800" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="860" y="800"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="128" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="127" vertex="1" connectable="0">
                    <mxGeometry x="-0.2871" y="3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="45" value="Is Expired?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="820" y="870" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="64" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="55" target="62" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="Check for refreshToken cookie" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="940" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="134" style="edgeStyle=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="60" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1230" y="1220"/>
                            <mxPoint x="125" y="1220"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="60" value="Allow request to proceed" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1190" y="980" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="65" style="edgeStyle=none;html=1;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="62" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="730" y="630" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1160" y="630"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="66" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="65" vertex="1" connectable="0">
                    <mxGeometry x="-0.8599" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="70" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="62" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1220" y="830" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1160" y="830"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="71" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="70" vertex="1" connectable="0">
                    <mxGeometry x="-0.3976" y="3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="62" value="Found?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1120" y="690" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="79" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="77" target="78" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="77" value="Check db for the refresh token." style="rounded=1;whiteSpace=wrap;html=1;fontColor=#fff;" parent="1" vertex="1">
                    <mxGeometry x="1220" y="800" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="80" style="edgeStyle=none;html=1;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="78" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1170" y="630" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1440" y="630"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="83" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="78" target="82" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1440" y="940"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="84" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="83" vertex="1" connectable="0">
                    <mxGeometry x="-0.6083" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="78" value="Found?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1400" y="790" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="86" style="edgeStyle=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="82" target="85" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="87" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="86" vertex="1" connectable="0">
                    <mxGeometry x="-0.0231" relative="1" as="geometry">
                        <mxPoint x="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="90" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="82" target="89" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1560" y="1060"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="91" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="90" vertex="1" connectable="0">
                    <mxGeometry x="-0.5812" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="82" value="Has Been Used?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1520" y="900" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="88" style="edgeStyle=none;html=1;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="85" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1450" y="630" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1560" y="630"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="85" value="Bad Actor Request&lt;br&gt;&lt;br&gt;Revoke all access tokens???" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#ffffff;fillColor=#6a00ff;strokeColor=#3700CC;" parent="1" vertex="1">
                    <mxGeometry x="1500" y="710" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="92" style="edgeStyle=none;html=1;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="89" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1570" y="630" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1680" y="630"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="93" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="92" vertex="1" connectable="0">
                    <mxGeometry x="-0.662" relative="1" as="geometry">
                        <mxPoint x="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="97" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="89" target="96" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1680" y="1180"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="98" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="97" vertex="1" connectable="0">
                    <mxGeometry x="-0.6613" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="89" value="Is Valid?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1640" y="1020" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="99" style="edgeStyle=none;html=1;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="96" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1690" y="630" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1800" y="630"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="100" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#fff;" parent="99" vertex="1" connectable="0">
                    <mxGeometry x="-0.6665" y="-3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="102" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="96" target="101" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="96" value="Is&lt;br&gt;Expired?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1760" y="1140" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="117" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="101" target="106" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="101" value="Get User ID from refreshToken payload" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#fff;" parent="1" vertex="1">
                    <mxGeometry x="1900" y="1150" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="104" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="106" target="107" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="105" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="106" target="112" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2290" y="1180" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="106" value="Create Auth Token" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" parent="1" vertex="1">
                    <mxGeometry x="2100" y="1150" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="107" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2080" y="1270" width="160" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="108" value="Create and sign JWT with 15 min expiration" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2090" y="1280" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="109" value="Save JWT into Redis???" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6a00ff;fontColor=#ffffff;strokeColor=#3700CC;" parent="1" vertex="1">
                    <mxGeometry x="2090" y="1350" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="110" value="Set JWT as response Authorization header" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2090" y="1420" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="111" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="112" target="113" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="118" style="edgeStyle=none;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#fff;fontColor=#fff;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="112" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="2540" y="1180"/>
                            <mxPoint x="2540" y="1630"/>
                            <mxPoint x="1400" y="1630"/>
                            <mxPoint x="1400" y="1020"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="112" value="Create Auth Token" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" parent="1" vertex="1">
                    <mxGeometry x="2300" y="1150" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="113" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2280" y="1270" width="160" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="114" value="Create and sign JWT with 30 day expiration" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2290" y="1280" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="115" value="Set JWT as refreshToken HTTP Cookie" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2290" y="1420" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="116" value="Save refresh token to DB with ref to user" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="2290" y="1350" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="121" style="edgeStyle=none;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#6600CC;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="119" target="120" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="119" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontColor=#fff;fillColor=none;strokeColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="1000" y="980" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="120" value="Check Redis to make sure this token hasn't been revoked???" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="780" y="990" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="126" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#6600CC;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="122" target="125" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="122" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontColor=#fff;fillColor=none;strokeColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="820" y="690" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="125" value="Remove Access Token from from Redis???" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="970" y="550" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="133" style="edgeStyle=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#6600CC;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="129" target="132" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="129" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontColor=#fff;fillColor=none;strokeColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="1400" y="590.6700000000001" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="132" value="Remove refreshToken from HTTP Cookies???" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="1375" y="490" width="130" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="138" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#7F00FF;fontColor=#7F00FF;startArrow=none;startFill=0;endArrow=classic;endFill=1;" parent="1" source="136" target="137" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="136" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontColor=#fff;fillColor=none;strokeColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="320" y="560" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="137" value="Redirect to /signin???" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#7F00FF;" parent="1" vertex="1">
                    <mxGeometry x="425" y="510" width="130" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>